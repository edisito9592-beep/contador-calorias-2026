<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Contador de calor√≠as 2026</title>

<style>
body{font-family:Arial;background:#f5f5f5;padding:15px}
h1{text-align:center}
.card{background:#fff;padding:15px;border-radius:12px;margin-bottom:15px}
.big{font-size:28px;text-align:center}
.green{color:#2ecc71}
.yellow{color:#f1c40f}
.red{color:#e74c3c}
select,input,button{width:100%;padding:10px;margin-top:8px;font-size:16px}
button{background:#2ecc71;color:#fff;border:none;border-radius:8px}
button.gray{background:#95a5a6}
.item{border-bottom:1px solid #eee;padding:6px 0}
.small{font-size:14px;color:#555}
.del{color:red;float:right;cursor:pointer}
.row{display:flex;gap:6px}
.row button{flex:1}
</style>
</head>

<body>

<h1>üî• Calor√≠as del D√≠a</h1>

<div class="card">
  <div id="kcal" class="big green">0 / 2000 kcal</div>
  <div id="macros" class="small" style="text-align:center">
    Prote√≠na: 0 g | Grasas: 0 g | Carbs: 0 g
  </div>
</div>

<div class="card">

<select id="food">
  <option value="">Selecciona alimento</option>

  <optgroup label="Prote√≠nas">
    <option value="pollo">Pollo</option>
    <option value="huevo">Huevo</option>
    <option value="res">Carne de res</option>
    <option value="cerdo">Carne de cerdo</option>
    <option value="pescado">Pescado</option>
    <option value="atun">At√∫n</option>
    <option value="jamon">Jam√≥n</option>
    <option value="queso">Queso</option>
  </optgroup>

  <optgroup label="Carbohidratos">
    <option value="tortilla">Tortilla</option>
    <option value="arroz">Arroz</option>
    <option value="frijol">Frijoles</option>
    <option value="avena">Avena</option>
    <option value="pan">Pan</option>
    <option value="pasta">Pasta</option>
  </optgroup>

  <optgroup label="L√°cteos">
    <option value="leche">Leche</option>
    <option value="yogurt">Yogurt natural</option>
  </optgroup>
</select>

<select id="pieza" style="display:none">
  <option value="pechuga">Pechuga</option>
  <option value="muslo">Muslo</option>
  <option value="pierna">Pierna</option>
  <option value="ala">Ala</option>
</select>

<select id="piel" style="display:none">
  <option value="sin">Sin piel</option>
  <option value="con">Con piel</option>
</select>

<select id="hueso" style="display:none">
  <option value="sin">Sin hueso</option>
  <option value="con">Con hueso</option>
</select>

<select id="tortillaMode" style="display:none">
  <option value="pieces">Piezas</option>
  <option value="grams">Gramos</option>
</select>

<select id="prep">
  <option value="crudo">Crudo / natural</option>
  <option value="plancha">A la plancha</option>
  <option value="hervido">Hervido</option>
  <option value="aceite">Con aceite</option>
  <option value="frito">Frito</option>
  <option value="empanizado">Empanizado</option>
  <option value="rostizado">Rostizado</option>
  <option value="lenia">A la le√±a</option>
</select>

<div id="oilBox" style="display:none">
  <select id="oilType">
    <option value="oliva">Aceite de oliva</option>
    <option value="vegetal">Aceite vegetal</option>
    <option value="aguacate">Aceite de aguacate</option>
    <option value="coco">Aceite de coco</option>
  </select>
  <input type="number" id="oilGrams" placeholder="Gramos de aceite">
  <div class="row">
    <button class="gray" onclick="setOil(5)">5 g</button>
    <button class="gray" onclick="setOil(10)">10 g</button>
    <button class="gray" onclick="setOil(20)">20 g</button>
  </div>
</div>

<input type="number" id="qty" placeholder="Cantidad (g o piezas)">
<button onclick="add()">Agregar</button>

</div>

<div class="card">
<h3>üìã Alimentos del d√≠a</h3>
<div id="list"></div>
<button onclick="resetDay()" style="background:#e74c3c">Nuevo d√≠a</button>
</div>

<div class="card">
<h3>üåÆ Configurar tortilla</h3>
<input type="number" id="tCal" placeholder="Calor√≠as por 100 g">
<input type="number" id="tGram" placeholder="Gramos por pieza">
<button onclick="saveTortilla()">Guardar tortilla</button>
</div>

<script>
/* ==== Config tortilla ==== */
let tortillaConfig = JSON.parse(localStorage.getItem("tortillaConfig")) || {
  caloriesPer100g:220,
  gramsPerPiece:25
};
tCal.value=tortillaConfig.caloriesPer100g;
tGram.value=tortillaConfig.gramsPerPiece;

function saveTortilla(){
  tortillaConfig.caloriesPer100g=parseFloat(tCal.value);
  tortillaConfig.gramsPerPiece=parseFloat(tGram.value);
  localStorage.setItem("tortillaConfig",JSON.stringify(tortillaConfig));
  alert("Tortilla actualizada ‚úÖ");
}

/* ==== D√≠a ==== */
let d = JSON.parse(localStorage.getItem("day")) || {
  kcal:0,p:0,g:0,c:0,items:[],date:new Date().toDateString()
};
if(d.date!==new Date().toDateString()){
  d={kcal:0,p:0,g:0,c:0,items:[],date:new Date().toDateString()};
}

food.onchange=()=>{
  let isPollo=food.value==="pollo";
  pieza.style.display=piel.style.display=hueso.style.display=isPollo?"block":"none";
  tortillaMode.style.display=food.value==="tortilla"?"block":"none";
};

prep.onchange=()=>{
  oilBox.style.display=["aceite","frito","empanizado"].includes(prep.value)?"block":"none";
};

function setOil(g){oilGrams.value=g}

/* ==== Agregar ==== */
function add(){
  let f=food.value,q=parseFloat(qty.value);
  if(!f||!q)return;

  let kcal=0,p=0,g=0,c=0,name="";

  let base100={
    res:[250,26,20,0],
    cerdo:[242,27,14,0],
    pescado:[120,22,2,0],
    atun:[116,26,1,0],
    jamon:[145,21,5,2],
    queso:[280,18,22,3],
    arroz:[130,2.5,0.3,28],
    frijol:[130,9,0.5,23],
    avena:[389,17,7,66],
    pan:[265,9,3,49],
    pasta:[131,5,1,25],
    leche:[42,3.4,1,5],
    yogurt:[59,10,0.4,3.6]
  };

  if(f==="pollo"){
    let base={pechuga:165,muslo:180,pierna:190,ala:220}[pieza.value];
    kcal=base*q/100;p=31*q/100;g=3.6*q/100;
    if(piel.value==="con"){kcal+=50*q/100;g+=5*q/100}
    if(hueso.value==="con"){kcal*=0.7;p*=0.7;g*=0.7}
    name=`Pollo ${pieza.value}`;
  } 
  else if(f==="huevo"){
    kcal=70*q;p=6*q;g=5*q;name="Huevo";
  }
  else if(f==="tortilla"){
    let grams=tortillaMode.value==="pieces"?q*tortillaConfig.gramsPerPiece:q;
    kcal=(grams*tortillaConfig.caloriesPer100g)/100;
    c=grams*0.45;
    name=`Tortilla ${tortillaMode.value==="pieces"?q+" pzas":grams+" g"}`;
  }
  else{
    let [k,pv,gv,cv]=base100[f];
    kcal=k*q/100;p=pv*q/100;g=gv*q/100;c=cv*q/100;
    name=food.options[food.selectedIndex].text;
  }

  if(oilBox.style.display==="block"){
    let og=parseFloat(oilGrams.value)||0;
    kcal+=og*9;g+=og;
    name+=` + aceite`;
  }

  d.kcal+=kcal;d.p+=p;d.g+=g;d.c+=c;
  d.items.push({name,kcal,p,g,c});
  localStorage.setItem("day",JSON.stringify(d));
  render();
}

function delItem(i){
  let it=d.items[i];
  d.kcal-=it.kcal;d.p-=it.p;d.g-=it.g;d.c-=it.c;
  d.items.splice(i,1);
  localStorage.setItem("day",JSON.stringify(d));
  render();
}

function resetDay(){
  if(confirm("¬øNuevo d√≠a?")){
    localStorage.removeItem("day");
    location.reload();
  }
}

function render(){
  kcal.innerText=Math.round(d.kcal)+" / 2000 kcal";
  kcal.className="big "+(d.kcal>=2000?"red":d.kcal>=1800?"yellow":"green");
  macros.innerText=`Prote√≠na: ${Math.round(d.p)} g | Grasas: ${Math.round(d.g)} g | Carbs: ${Math.round(d.c)} g`;
  list.innerHTML="";
  d.items.forEach((i,x)=>{
    list.innerHTML+=`<div class="item">${i.name} - ${Math.round(i.kcal)} kcal <span class="del" onclick="delItem(${x})">‚ùå</span></div>`;
  });
}
render();
</script>

</body>
</html>
