<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Contador de calor√≠as 2026</title>
<style>
body{font-family:Arial;background:#f5f5f5;padding:15px}
h1{text-align:center}
.card{background:#fff;padding:15px;border-radius:12px;margin-bottom:15px}
.big{font-size:28px;text-align:center}
.green{color:#2ecc71}
.yellow{color:#f1c40f}
.red{color:#e74c3c}
select,input,button{width:100%;padding:10px;margin-top:8px;font-size:16px}
button{background:#2ecc71;color:#fff;border:none;border-radius:8px}
.item{border-bottom:1px solid #eee;padding:6px 0}
.small{font-size:14px;color:#555}
.del{color:red;float:right;cursor:pointer}
</style>
</head>
<body>

<h1>üî• Calor√≠as del D√≠a</h1>

<div class="card">
  <div id="kcal" class="big green">0 / 2000 kcal</div>
  <div id="macros" class="small" style="text-align:center">
    Prote√≠na: 0 g | Grasas: 0 g | Carbs: 0 g
  </div>
</div>

<div class="card">
<select id="food">
  <option value="">Selecciona alimento</option>
  <option value="pollo">Pollo</option>
  <option value="huevo">Huevo</option>
  <option value="tortilla">Tortilla</option>
</select>

<select id="pieza" style="display:none">
  <option value="pechuga">Pechuga</option>
  <option value="muslo">Muslo</option>
  <option value="pierna">Pierna</option>
  <option value="ala">Ala</option>
</select>

<select id="piel" style="display:none">
  <option value="sin">Sin piel</option>
  <option value="con">Con piel</option>
</select>

<select id="hueso" style="display:none">
  <option value="sin">Sin hueso</option>
  <option value="con">Con hueso</option>
</select>

<input type="number" id="qty" placeholder="Gramos o piezas">
<button onclick="add()">Agregar</button>
</div>

<div class="card">
<h3>üìã Alimentos del d√≠a</h3>
<div id="list"></div>
<button onclick="resetDay()" style="background:#e74c3c">Nuevo d√≠a</button>
</div>

<script>
let d = JSON.parse(localStorage.getItem("day")) || {
  kcal:0,p:0,g:0,c:0,items:[],date:new Date().toDateString()
};

if(d.date!==new Date().toDateString()){
  d={kcal:0,p:0,g:0,c:0,items:[],date:new Date().toDateString()};
}

document.getElementById("food").onchange=()=>{
  let f=food.value;
  let show=f==="pollo";
  pieza.style.display=show?"block":"none";
  piel.style.display=show?"block":"none";
  hueso.style.display=show?"block":"none";
};

function add(){
  let f=food.value;
  let q=parseFloat(qty.value);
  if(!f||!q)return;

  let kcal=0,p=0,g=0,c=0,name=f;

  if(f==="pollo"){
    let base={pechuga:165,muslo:180,pierna:190,ala:220}[pieza.value];
    kcal=base*q/100;
    p=31*q/100;
    g=3.6*q/100;
    if(piel.value==="con"){kcal+=50*q/100;g+=5*q/100;}
    if(hueso.value==="con"){kcal*=0.7;p*=0.7;g*=0.7;}
    name=`Pollo ${pieza.value}`;
  }

  if(f==="huevo"){kcal=70*q;p=6*q;g=5*q;}
  if(f==="tortilla"){kcal=60*q;c=15*q;}

  d.kcal+=kcal;d.p+=p;d.g+=g;d.c+=c;
  d.items.push({name,q,kcal,p,g,c});
  localStorage.setItem("day",JSON.stringify(d));
  render();
}

function del(i){
  let it=d.items[i];
  d.kcal-=it.kcal;d.p-=it.p;d.g-=it.g;d.c-=it.c;
  d.items.splice(i,1);
  localStorage.setItem("day",JSON.stringify(d));
  render();
}

function resetDay(){
  if(confirm("¬øNuevo d√≠a?")){
    localStorage.removeItem("day");
    location.reload();
  }
}

function render(){
  let k=document.getElementById("kcal");
  k.innerText=Math.round(d.kcal)+" / 2000 kcal";
  k.className="big "+(d.kcal>=2000?"red":d.kcal>=1800?"yellow":"green");
  macros.innerText=`Prote√≠na: ${Math.round(d.p)} g | Grasas: ${Math.round(d.g)} g | Carbs: ${Math.round(d.c)} g`;

  list.innerHTML="";
  d.items.forEach((i,x)=>{
    list.innerHTML+=`<div class="item">
      ${i.name} (${i.q}) - ${Math.round(i.kcal)} kcal
      <span class="del" onclick="del(${x})">‚ùå</span>
    </div>`;
  });
}
render();
</script>

</body>
</html>
