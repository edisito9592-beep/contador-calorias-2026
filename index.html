<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Contador de Calor√≠as 2026</title>

<style>
body{font-family:Arial;background:#f5f5f5;padding:15px}
h1{text-align:center}
.card{background:#fff;padding:15px;border-radius:12px;margin-bottom:15px}
.big{font-size:28px;text-align:center}
.green{color:#2ecc71}
.yellow{color:#f1c40f}
.red{color:#e74c3c}
select,input,button{width:100%;padding:10px;margin-top:8px;font-size:16px}
button{background:#2ecc71;color:#fff;border:none;border-radius:8px}
button.gray{background:#95a5a6}
.item{border-bottom:1px solid #eee;padding:6px 0}
.small{font-size:14px;color:#555;text-align:center}
.del{color:red;float:right;cursor:pointer}
.bar{height:10px;background:#eee;border-radius:6px;overflow:hidden}
.bar div{height:100%;background:#2ecc71}
.row{display:flex;gap:6px}
.row button{flex:1}
</style>
</head>

<body>

<h1>üî• Calor√≠as del D√≠a</h1>

<!-- RESUMEN -->
<div class="card">
  <div id="kcal" class="big green">0 kcal</div>
  <div id="macros" class="small">
    Prote√≠na: 0 g | Grasas: 0 g | Carbs: 0 g
  </div>
  <div class="bar"><div id="pbar"></div></div>
  <div class="small" id="ptext"></div>
</div>

<!-- DATOS PERSONALES -->
<div class="card">
<h3>üìè Datos personales</h3>
<input id="peso" type="number" placeholder="Peso (kg)">
<input id="altura" type="number" placeholder="Estatura (cm)">
<input id="edad" type="number" placeholder="Edad">

<select id="sexo">
  <option value="h">Hombre</option>
  <option value="m">Mujer</option>
</select>

<select id="actividad">
  <option value="1.2">Sedentario</option>
  <option value="1.375">Ligero (1-3 d√≠as)</option>
  <option value="1.55">Moderado (3-5 d√≠as)</option>
  <option value="1.725">Alto (6-7 d√≠as)</option>
</select>

<select id="tipo">
  <option value="fuerza">Fuerza / pesas</option>
  <option value="cardio">Cardio</option>
  <option value="mixto">Mixto</option>
</select>

<button onclick="calcObjetivos()">Calcular objetivos</button>
<div class="small" id="objetivos"></div>
</div>

<!-- AGREGAR ALIMENTO -->
<div class="card">
<select id="food">
<option value="">Selecciona alimento</option>
<option value="pollo">Pollo</option>
<option value="huevo">Huevo</option>
<option value="res">Res</option>
<option value="cerdo">Cerdo</option>
<option value="arroz">Arroz</option>
<option value="tortilla">Tortilla</option>
<option value="pan">Pan</option>
<option value="avena">Avena</option>
<option value="queso">Queso</option>
<option value="whey">Prote√≠na whey</option>
</select>

<select id="prep">
<option value="crudo">Crudo</option>
<option value="plancha">Plancha</option>
<option value="aceite">Con aceite</option>
<option value="frito">Frito</option>
<option value="rostizado">Rostizado</option>
</select>

<div id="oilBox" style="display:none">
<input id="oilGrams" type="number" placeholder="Gramos de aceite">
<div class="row">
<button class="gray" onclick="setOil(5)">5 g</button>
<button class="gray" onclick="setOil(10)">10 g</button>
</div>
</div>

<input id="qty" type="number" placeholder="Cantidad (g o piezas)">
<button onclick="add()">Agregar</button>
</div>

<!-- LISTA -->
<div class="card">
<h3>üìã Alimentos del d√≠a</h3>
<div id="list"></div>
<button onclick="resetDay()" style="background:#e74c3c">Nuevo d√≠a</button>
</div>

<script>
/* ===== BASE ===== */
let base100={
pollo:[165,31,3.6,0],
huevo:[155,13,11,1],
res:[250,26,20,0],
cerdo:[242,27,14,0],
arroz:[130,2.5,0.3,28],
avena:[389,17,7,66],
pan:[265,9,3,49],
queso:[280,18,22,3],
whey:[400,80,7,8]
};

let day=JSON.parse(localStorage.getItem("day"))||{
kcal:0,p:0,g:0,c:0,items:[],date:new Date().toDateString()
};
if(day.date!==new Date().toDateString()){
day={kcal:0,p:0,g:0,c:0,items:[],date:new Date().toDateString()};
}

let objetivos=JSON.parse(localStorage.getItem("objetivos"))||{};

/* ===== OBJETIVOS ===== */
function calcObjetivos(){
let peso=+pesoInput.value||+peso.value;
let alt=+altura.value;
let ed=+edad.value;
let sx=sexo.value;
let act=+actividad.value;
let tipoE=tipo.value;

let tmb=sx==="h"
?10*peso+6.25*alt-5*ed+5
:10*peso+6.25*alt-5*ed-161;

let mant=Math.round(tmb*act);
objetivos={
mant,
def:mant-400,
vol:mant+300,
prot:peso*(tipoE==="fuerza"?2.2:2)
};
localStorage.setItem("objetivos",JSON.stringify(objetivos));
renderObjetivos();
render();
}

function renderObjetivos(){
if(!objetivos.mant)return;
objetivosDiv.innerHTML=
`üî• Mantenimiento: <b>${objetivos.mant}</b> kcal<br>
üî¥ D√©ficit: <b>${objetivos.def}</b> kcal<br>
üü¢ Volumen: <b>${objetivos.vol}</b> kcal<br>
üí™ Prote√≠na objetivo: <b>${Math.round(objetivos.prot)}</b> g`;
}

/* ===== COMIDA ===== */
prep.onchange=()=>oilBox.style.display=["aceite","frito"].includes(prep.value)?"block":"none";
function setOil(g){oilGrams.value=g}

function add(){
let f=food.value,q=+qty.value;if(!f||!q)return;
let [k,p,g,c]=base100[f];
let kcal=k*q/100,pr=p*q/100,gr=g*q/100,ca=c*q/100;

if(oilBox.style.display==="block"){
let og=+oilGrams.value||0;
kcal+=og*9;gr+=og;
}

day.kcal+=kcal;day.p+=pr;day.g+=gr;day.c+=ca;
day.items.push({name:food.options[food.selectedIndex].text,kcal});
localStorage.setItem("day",JSON.stringify(day));
render();
}

function resetDay(){
if(confirm("¬øNuevo d√≠a?")){
localStorage.removeItem("day");
location.reload();
}
}

/* ===== RENDER ===== */
function render(){
kcal.innerText=Math.round(day.kcal)+" kcal";
macros.innerText=`Prote√≠na: ${Math.round(day.p)} g | Grasas: ${Math.round(day.g)} g | Carbs: ${Math.round(day.c)} g`;

let goal=objetivos.prot||1;
let pct=Math.min(100,(day.p/goal)*100);
pbar.style.width=pct+"%";
ptext.innerText=`Prote√≠na: ${Math.round(day.p)} / ${Math.round(goal)} g`;

list.innerHTML="";
day.items.forEach((i,x)=>{
list.innerHTML+=`<div class="item">${i.name} - ${Math.round(i.kcal)} kcal</div>`;
});
}

renderObjetivos();
render();
</script>

</body>
</html>
