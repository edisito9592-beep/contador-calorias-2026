<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Contador de calor√≠as 2026</title>
<meta name="theme-color" content="#2ecc71">

<style>
body{font-family:Arial;background:#f5f5f5;padding:15px}
h1{text-align:center}
.card{background:#fff;padding:15px;border-radius:12px;margin-bottom:15px}
.big{font-size:30px;text-align:center}
select,input,button{width:100%;padding:10px;margin-top:8px;font-size:16px}
button{background:#2ecc71;color:#fff;border:none;border-radius:8px}
button.red{background:#e74c3c}
button.gray{background:#95a5a6}
.item{border-bottom:1px solid #eee;padding:6px 0}
.small{font-size:13px;color:#555}
.del{color:red;float:right;cursor:pointer}
.progress{height:10px;background:#eee;border-radius:10px;overflow:hidden}
.progress div{height:100%;background:#2ecc71}
.warn{color:#e67e22;font-weight:bold;text-align:center}
.hidden{display:none}
</style>
</head>

<body>

<h1>üî• Calor√≠as del d√≠a</h1>

<div class="card">
  <div id="kcal" class="big">0 / 2000 kcal</div>
  <div id="macros" class="small">Prote√≠na: 0 g | Grasas: 0 g | Carbs: 0 g</div>
  <div id="proteinWarn" class="warn hidden">‚ö†Ô∏è Prote√≠na por debajo del objetivo</div>
  <div class="progress"><div id="pbar"></div></div>
</div>

<!-- DATOS PERSONALES -->
<div class="card">
<h3>üßç‚Äç‚ôÇÔ∏è Datos personales</h3>
<input id="peso" type="number" placeholder="Peso (kg)">
<input id="altura" type="number" placeholder="Estatura (cm)">
<input id="edad" type="number" placeholder="Edad">
<select id="sexo">
  <option value="h">Hombre</option>
  <option value="m">Mujer</option>
</select>
<select id="actividad">
  <option value="1.2">Sedentario</option>
  <option value="1.4">Ligero</option>
  <option value="1.6">Moderado</option>
  <option value="1.8">Activo</option>
</select>

<select id="modo">
  <option value="mantenimiento">Mantenimiento</option>
  <option value="deficit">D√©ficit</option>
  <option value="volumen">Ganancia muscular</option>
</select>

<button onclick="calcularObjetivos()">Calcular calor√≠as</button>
<div id="resultado" class="small"></div>
</div>

<!-- OBJETIVO PROTE√çNA -->
<div class="card">
<h3>üéØ Objetivo de prote√≠na</h3>
<input id="proteinGoalInput" type="number" placeholder="Prote√≠na objetivo (g)">
<button onclick="setProteinGoal()">Guardar objetivo</button>
</div>

<!-- AGREGAR ALIMENTO -->
<div class="card">
<h3>üçΩÔ∏è Agregar alimento</h3>

<select id="food">
<option value="">Selecciona alimento</option>
<option value="huevo">ü•ö Huevo</option>
<option value="tortilla">üåÆ Tortilla</option>
<option value="pollo">Pollo</option>
<option value="res">Carne de res</option>
<option value="arroz">Arroz</option>
</select>

<div id="eggBox" class="hidden">
<select id="eggMode">
<option value="pieza">Por piezas</option>
<option value="gramos">Por gramos</option>
</select>
<input id="eggQty" type="number" placeholder="Cantidad">
</div>

<div id="tortillaBox" class="hidden">
<input id="torQty" type="number" placeholder="N√∫mero de tortillas">
<input id="torKcal" type="number" placeholder="Calor√≠as por tortilla">
</div>

<input id="qty" type="number" placeholder="Cantidad (g)" class="hidden">

<button onclick="add()">Agregar</button>
</div>

<div class="card">
<h3>üìã Alimentos del d√≠a</h3>
<div id="list"></div>
<button class="red" onclick="resetDay()">Nuevo d√≠a</button>
</div>

<script>
let objetivoKcal = Number(localStorage.getItem("objetivoKcal")) || 2000;
let proteinGoal = Number(localStorage.getItem("proteinGoal")) || 0;

let d = JSON.parse(localStorage.getItem("day")) || {kcal:0,p:0,fat:0,c:0,items:[]};

const base={
 pollo:[165,31,4,0],
 res:[250,26,20,0],
 arroz:[130,2.5,0.3,28]
};

function calcularObjetivos(){
 let p=+peso.value,h=+altura.value,e=+edad.value;
 if(!p||!h||!e)return;

 let bmr = sexo.value==="h"
   ? 10*p + 6.25*h - 5*e + 5
   : 10*p + 6.25*h - 5*e - 161;

 let mantenimiento = bmr * +actividad.value;

 if(modo.value==="deficit") objetivoKcal = Math.round(mantenimiento - 400);
 else if(modo.value==="volumen") objetivoKcal = Math.round(mantenimiento + 300);
 else objetivoKcal = Math.round(mantenimiento);

 proteinGoal = Math.round(p * 2);

 resultado.innerHTML =
 `üî• Mantenimiento: ${Math.round(mantenimiento)} kcal<br>
 üéØ Objetivo diario: ${objetivoKcal} kcal<br>
 üí™ Prote√≠na sugerida: ${proteinGoal} g`;

 proteinGoalInput.value = proteinGoal;

 localStorage.setItem("objetivoKcal",objetivoKcal);
 localStorage.setItem("proteinGoal",proteinGoal);

 render();
}

food.onchange=()=>{
 eggBox.classList.add("hidden");
 tortillaBox.classList.add("hidden");
 qty.classList.add("hidden");

 if(food.value==="huevo") eggBox.classList.remove("hidden");
 else if(food.value==="tortilla") tortillaBox.classList.remove("hidden");
 else if(food.value) qty.classList.remove("hidden");
};

function add(){
 let kcal=0,p=0,f=0,c=0,n="";

 if(food.value==="huevo"){
  let q=+eggQty.value;if(q<=0)return;
  if(eggMode.value==="pieza"){kcal=70*q;p=6*q;f=5*q;n=`Huevo ${q} pzas`}
  else{kcal=155*q/100;p=13*q/100;f=11*q/100;n=`Huevo ${q} g`}
 }
 else if(food.value==="tortilla"){
  let q=+torQty.value,k=+torKcal.value;
  if(q<=0||k<=0)return;
  kcal=q*k;c=kcal/4;n=`Tortilla ${q} pzas`;
 }
 else{
  let q=+qty.value;if(q<=0)return;
  let b=base[food.value];
  kcal=b[0]*q/100;p=b[1]*q/100;f=b[2]*q/100;c=b[3]*q/100;
  n=food.options[food.selectedIndex].text;
 }

 d.kcal+=kcal; d.p+=p; d.fat+=f; d.c+=c;
 d.items.push({n,kcal,p,f,c});
 localStorage.setItem("day",JSON.stringify(d));
 clear(); render();
}

function render(){
 kcal.innerText=`${Math.round(d.kcal)} / ${objetivoKcal} kcal`;
 macros.innerText=`Prote√≠na: ${Math.round(d.p)} g | Grasas: ${Math.round(d.fat)} g | Carbs: ${Math.round(d.c)} g`;
 pbar.style.width=Math.min(100,(d.kcal/objetivoKcal)*100)+"%";
 proteinWarn.classList.toggle("hidden",!(proteinGoal && d.p < proteinGoal));
 list.innerHTML=d.items.map((i,x)=>`
 <div class="item">${i.n} - ${Math.round(i.kcal)} kcal
 <div class="small">P:${Math.round(i.p)} G:${Math.round(i.f)} C:${Math.round(i.c)}</div>
 <span class="del" onclick="del(${x})">‚ùå</span></div>`).join("");
}

function del(i){
 let it=d.items[i];
 d.kcal-=it.kcal; d.p-=it.p; d.fat-=it.f; d.c-=it.c;
 d.items.splice(i,1);
 localStorage.setItem("day",JSON.stringify(d));
 render();
}

function resetDay(){
 localStorage.removeItem("day");
 location.reload();
}

function clear(){
 eggQty.value=torQty.value=torKcal.value=qty.value="";
}

render();
</script>

</body>
</html>
