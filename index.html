<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Contador de calor√≠as 2026</title>

<style>
body{font-family:Arial;background:#f5f5f5;padding:15px}
h1{text-align:center}
.card{background:#fff;padding:15px;border-radius:12px;margin-bottom:15px}
.big{font-size:30px;text-align:center}
select,input,button{width:100%;padding:10px;margin-top:8px;font-size:16px}
button{background:#2ecc71;color:#fff;border:none;border-radius:8px}
button.red{background:#e74c3c}
button.gray{background:#95a5a6}
.item{border-bottom:1px solid #eee;padding:6px 0}
.small{font-size:13px;color:#555}
.del{color:red;float:right;cursor:pointer}
.progress{height:10px;background:#eee;border-radius:10px;overflow:hidden}
.progress div{height:100%;background:#2ecc71}
.hidden{display:none}
.warn{color:#e67e22;font-weight:bold;text-align:center}
</style>
</head>

<body>

<h1>üî• Calor√≠as del d√≠a</h1>

<div class="card">
  <div id="kcal" class="big">0 / 2000 kcal</div>
  <div id="macros" class="small">Prote√≠na: 0 g | Grasas: 0 g | Carbs: 0 g</div>
  <div id="proteinWarn" class="warn hidden">‚ö†Ô∏è Prote√≠na por debajo del objetivo</div>
  <div class="progress"><div id="pbar"></div></div>
</div>

<div class="card">
<h3>üéØ Objetivos</h3>
<input id="proteinGoal" type="number" placeholder="Objetivo m√≠nimo de prote√≠na (g)">
<button onclick="setProteinGoal()">Guardar objetivo</button>
</div>

<div class="card">
<h3>üçΩÔ∏è Agregar alimento</h3>

<select id="food">
<option value="">Selecciona alimento</option>
<option value="huevo">ü•ö Huevo</option>
<option value="tortilla">üåÆ Tortilla</option>
<option value="pollo">Pollo</option>
<option value="res">Carne de res</option>
<option value="arroz">Arroz</option>
<option value="aceite">Aceite</option>
</select>

<div id="eggBox" class="hidden">
<select id="eggMode">
<option value="pieza">Por piezas</option>
<option value="gramos">Por gramos</option>
</select>
<input id="eggQty" type="number" placeholder="Cantidad">
</div>

<div id="tortillaBox" class="hidden">
<input id="torQty" type="number" placeholder="N√∫mero de tortillas">
<input id="torGrams" type="number" placeholder="Gramos por tortilla">
<input id="torKcal" type="number" placeholder="Calor√≠as por tortilla">
<button class="gray" onclick="saveTortilla()">‚≠ê Guardar favorita</button>
<select id="favTortillas"></select>
</div>

<input id="qty" type="number" placeholder="Cantidad (g)" class="hidden">

<button onclick="add()">Agregar</button>
<button class="gray" onclick="startVoice()">üéôÔ∏è Voz</button>
</div>

<div class="card">
<h3>üìã Alimentos del d√≠a</h3>
<div id="list"></div>
<button class="red" onclick="resetDay()">Nuevo d√≠a</button>
</div>

<script>
let objetivoKcal=2000;
let proteinGoal=Number(localStorage.getItem("proteinGoal"))||0;

let d=JSON.parse(localStorage.getItem("day"))||{kcal:0,p:0,fat:0,c:0,items:[]};
let favT=JSON.parse(localStorage.getItem("favT"))||[];

proteinGoal&& (proteinGoalInput.value=proteinGoal);

const base={
 pollo:[165,31,4,0],
 res:[250,26,20,0],
 arroz:[130,2.5,0.3,28]
};

food.onchange=()=>{
 eggBox.classList.add("hidden");
 tortillaBox.classList.add("hidden");
 qty.classList.add("hidden");

 if(food.value==="huevo") eggBox.classList.remove("hidden");
 else if(food.value==="tortilla") tortillaBox.classList.remove("hidden");
 else if(food.value) qty.classList.remove("hidden");
};

function add(){
 let kcal=0,p=0,f=0,c=0,n="";

 if(food.value==="huevo"){
  let q=+eggQty.value;if(q<=0)return;
  if(eggMode.value==="pieza"){kcal=70*q;p=6*q;f=5*q;n=`Huevo ${q} pzas`}
  else{kcal=155*q/100;p=13*q/100;f=11*q/100;n=`Huevo ${q} g`}
 }

 else if(food.value==="tortilla"){
  let q=+torQty.value,k=+torKcal.value;
  if(q<=0||k<=0)return;
  kcal=q*k;c=kcal/4;n=`Tortilla ${q} pzas`;
 }

 else{
  let q=+qty.value;if(q<=0)return;
  let b=base[food.value];
  kcal=b[0]*q/100;p=b[1]*q/100;f=b[2]*q/100;c=b[3]*q/100;
  n=food.value;
 }

 d.kcal+=kcal;d.p+=p;d.fat+=f;d.c+=c;
 d.items.push({n,kcal,p,f,c});
 localStorage.setItem("day",JSON.stringify(d));
 clear();render();
}

function render(){
 kcal.innerText=`${Math.round(d.kcal)} / ${objetivoKcal} kcal`;
 macros.innerText=`Prote√≠na: ${Math.round(d.p)} g | Grasas: ${Math.round(d.fat)} g | Carbs: ${Math.round(d.c)} g`;
 pbar.style.width=Math.min(100,(d.kcal/objetivoKcal)*100)+"%";
 proteinWarn.classList.toggle("hidden",!(proteinGoal&&d.p<proteinGoal));
 list.innerHTML=d.items.map((i,x)=>`
 <div class="item">${i.n} - ${Math.round(i.kcal)} kcal
 <div class="small">P:${Math.round(i.p)} G:${Math.round(i.f)} C:${Math.round(i.c)}</div>
 <span class="del" onclick="del(${x})">‚ùå</span></div>`).join("");
}

function del(i){
 let it=d.items[i];
 d.kcal-=it.kcal;d.p-=it.p;d.fat-=it.f;d.c-=it.c;
 d.items.splice(i,1);
 localStorage.setItem("day",JSON.stringify(d));
 render();
}

function resetDay(){localStorage.removeItem("day");location.reload()}

function clear(){eggQty.value=torQty.value=torGrams.value=torKcal.value=qty.value=""}

function setProteinGoal(){
 proteinGoal=+proteinGoalInput.value;
 localStorage.setItem("proteinGoal",proteinGoal);
 render();
}

function saveTortilla(){
 favT.push({k:torKcal.value});
 localStorage.setItem("favT",JSON.stringify(favT));
 loadFav();
}

function loadFav(){
 favTortillas.innerHTML=favT.map((f,i)=>`<option value="${i}">${f.k} kcal</option>`).join("");
}
favTortillas.onchange=()=>torKcal.value=favT[favTortillas.value].k;

function startVoice(){
 let r=new webkitSpeechRecognition();
 r.lang="es-MX";
 r.onresult=e=>{
  let t=e.results[0][0].transcript.toLowerCase();
  if(t.includes("huevo"))food.value="huevo";
  if(t.includes("tortilla"))food.value="tortilla";
 };
 r.start();
}

loadFav();render();
</script>

</body>
</html>
